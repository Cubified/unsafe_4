all: loader

CC=$(DEVKITPPC)/bin/powerpc-eabi-gcc

FLAGS=-O0 -pipe -fomit-frame-pointer -I$(DEVKITPRO)/libogc/include -DGEKKO -DHW_RVL -mrvl -mcpu=750 -meabi -mhard-float -Wall
LDFLAGS=-DGEKKO -DHW_RVL -mrvl -mcpu=750 -meabi -mhard-float

INPUT=source/loader.c
ELFFILE=loader.elf
DOLFILE=loader.dol

ELF2DOL=elf2dol

RM=/bin/rm

loader:
	$(CC) $(INPUT) -o $(ELFFILE) $(FLAGS) $(LDFLAGS)
	$(ELF2DOL) $(ELFFILE) $(DOLFILE)

clean:
	if [ -e $(ELFFILE) ]; then $(RM) $(ELFFILE); fi
	if [ -e $(DOLFILE) ]; then $(RM) $(DOLFILE); fi
